MDScreenManager:
    HomeScreen:
    NewsScreen:


#:import datetime datetime.datetime
<NewsScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        spacing: dp(10)
        padding: dp(10)
        MDLabel:
            text: "News\n" + datetime.today().strftime('%d %B')
            font_style: "H5"
            bold: True
            theme_text_color: "Primary"
        MDLabel:
            text: "Dow Jones Industrial Average"
            font_style: "H6"
            theme_text_color: "Secondary"
        MDLabel:
            text: "43,428.02  -748.63"
            font_style: "H5"
            theme_text_color: "Error"
        MDBoxLayout:
            orientation: "vertical"
            spacing: dp(10)
            OneLineListItem:
                text: "New York Stock Market: Dow Jones closes down 748.63 points on concerns about the economy and tariffs"
            OneLineListItem:
                text: "The Dow Jones continues to fall, recently plunging more than 400 points, falling below the 44,000 level."
            OneLineListItem:
                text: "Dow Jones plunges more than 300 points, falls below 44,000, United Health shares"
        MDRaisedButton:
            text: "More about Dow Jones"
            pos_hint: {"center_x": 0.5}




<HomeScreen>:
    MDBoxLayout:
        orientation: "vertical"
        padding: dp(15)
        spacing: dp(15)
        md_bg_color: 0.2, 0.2, 0.2, 1  

        # ส่วน Header + ข่าว
        MDBoxLayout:
            size_hint_y: 0.4
            spacing: dp(15)

            # Header Box (ด้านซ้าย)
            MDBoxLayout:
                id: stock_box
                size_hint_x: 0.3
                size_hint_y: 1  
                md_bg_color: 0.1, 0.1, 0.1, 1
                radius: [10, 10, 10, 10]
                elevation: 10
                orientation: "vertical"
                spacing: dp(5)
                padding: dp(15)
                minimum_height: dp(100)

                MDLabel:
                    text: "Stock"
                    font_style: "Caption"
                    halign: "center"
                    font_size: "50sp"
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    size_hint_y: 0.5
                    height: self.texture_size[1] + dp(10)

                MDLabel:
                    id: stock_datetime
                    text: "Updating..."
                    font_style: "H6"
                    halign: "center"
                    theme_text_color: "Hint"
                    font_size: "23sp"
                    size_hint_y: 0.6
                    height: self.texture_size[1] + dp(10)

                MDRaisedButton: 
                    text: "Refresh"
                    pos_hint: {"center_x": 0.5}
                    size_hint_y: None
                    height: dp(20)
                    md_bg_color: 0.2, 0.2, 0.2, 1  
                    text_color: 1, 1, 1, 1 
                    elevation: 4  
                    theme_text_color: "Custom"
                    font_size: "18sp"  
                    radius: [20, 20, 20, 20]  
                    on_release: app.refresh_data()

            # ข่าว (ด้านขวา)
            MDBoxLayout:
                id: latest_news_box
                size_hint_x: 0.7
                size_hint_y: 1  
                md_bg_color: 0.1, 0.1, 0.1, 1 
                radius: [10, 10, 10, 10]
                elevation: 10
                padding: dp(10)

        # ตารางข้อมูลหุ้น
        ScrollView:
            size_hint_y: 0.6
            pos_hint: {"center_x": 0.5, "center_y": 0.5}
            radius: [10, 10, 10, 10]
            do_scroll_x: False
            do_scroll_y: True
            id: stock_table_box
            adaptive_height: True
            md_bg_color: 0.1, 0.1, 0.1, 1 
            canvas.before:
                Color:
                    rgba: 0.1, 0.1, 0.1, 1 
                Rectangle:
                    pos: self.pos
                    size: self.size
