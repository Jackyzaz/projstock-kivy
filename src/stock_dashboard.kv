ScreenManager:
    HomeScreen:
    StockChartScreen:

<RoundedButton@Button>:
    background_disabled_normal: ''
    background_color: 0, 0, 0, 0  
    canvas.before:
        Color:
            rgba: 7/255,7/255,7/255,0.8
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [22,] 

<RoundedButtonBack@Button>:
    background_disabled_normal: ''
    background_color: 0, 0, 0, 0  
    canvas.before:
        Color:
            rgba: 67/255, 67/255, 67/255, 0.8
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [22,] 


<RoundedSpinner@Spinner>:
    background_normal: ''  
    background_color: 0, 0, 0, 0  
    canvas.before:
        Color:
            rgba: 0.3, 0.3, 0.3, 1
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [12,]

<RoundedTextInput@TextInput>:
    background_normal: ''  
    background_color: 0, 0, 0, 0  
    hint_text_color: 7/255, 7/255, 0.7, 1
    canvas.before:
        Color:
            rgba: 10, 10, 10, 0.2
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [12,]


<HomeScreen>:
    name: "home"
    canvas.before:
        Color:
            rgba: 0.2, 0.2, 0.2, 1
        Rectangle:
            size: self.size
            pos: self.pos

    GridLayout:
        cols: 1
        rows: 8
        padding: [50, 20, 50, 20]
        spacing: 20
        size_hint: 1, 1

        Label:
            text: "Stock Dashboard"
            font_size: "58sp"
            color: 1, 1, 1, 1
            size_hint_y: None
            height: 80
            font_name: "data/fonts/Roboto-Bold.ttf"

        Widget:  
            size_hint_y: 1

        Label:
            text: "Ticker"
            font_size: "30sp"
            color: 1, 1, 1, 1
            size_hint_y: None
            height: 20
            font_name: "data/fonts/Roboto-Bold.ttf"

        RoundedTextInput:
            id: ticker_input
            hint_text: "Enter Stock..."
            size_hint: (1,0.45)
            background_disabled_normal: ''
            color: 0, 0, 0, 0.8
            multiline: False
            font_size: 36

        Label:
            text: "Parameters"
            font_size: "30sp"
            color: 1, 1, 1, 1
            size_hint_y: None
            height: 20
            font_name: "data/fonts/Roboto-Bold.ttf"

        GridLayout:
            cols: 2
            rows: 1
            spacing: 10
            size_hint: 0.5, 0.4

            RoundedSpinner:
                id: time_period_spinner
                text: "1d"
                values: ["1d", "1wk", "1mo", "1y", "max"]
                size_hint: (1,0.2)
                background_disabled_normal: ''
                font_size: "40sp"

            RoundedSpinner:
                id: technical_indicator_spinner
                text: "SMA 20"
                values: ["SMA 20", "EMA 20" ]
                size_hint: (1,0.2)
                background_disabled_normal: ''
                font_size: "40sp"

        Widget:  
            size_hint_y: 1

        RoundedButton:
            text: "Show Chart"
            size_hint: (1,0.5)
            font_size: "45sp"
            on_press: root.show_chart()
            background_disabled_normal: ''
           
<StockChartScreen>:
    name: "stock_chart"
    canvas.before:
        Color:
            rgba: 0.1, 0.1, 0.1, 1
        Rectangle:
            size: self.size
            pos: self.pos

    GridLayout:
        rows: 4  
        size_hint: 1, 1
        spacing: 10
        padding: [20, 20, 20, 20]

        BoxLayout:
            size_hint_y: 0.1
            Label:
                id: chart_label
                text: "Real Rime Stock Dashboard"
                font_size: "40sp"  
                color: 1, 1, 1, 1
                font_name: "data/fonts/Roboto-Bold.ttf"

        GridLayout:
            cols: 3
            size_hint_y: 0.2
            spacing: 10

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "High"
                    font_size: "25sp"
                    color: 1, 1, 1, 1
                Label:
                    id: stock_high
                    text: "638.25 USD"
                    font_size: "30sp"
                    color: 1, 1, 1, 1

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Low"
                    font_size: "25sp"
                    color: 1, 1, 1, 1
                Label:
                    id: stock_low
                    text: "433.97 USD"
                    font_size: "30sp"
                    color: 1, 1, 1, 1

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Volume"
                    font_size: "25sp"
                    color: 1, 1, 1, 1
                Label:
                    id: stock_volume
                    text: "794,603,351"
                    font_size: "30sp"
                    color: 1, 1, 1, 1

        BoxLayout:
            id: graph_widget
            size_hint_y: 0.6
            padding: [15, 15, 15, 15]
            opacity: 1

            Label:
                id: loading_label
                text: "Loading data..."
                font_size: "32sp"
                color: 0,0,0,0.8
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                opacity: 0  

        BoxLayout:
            size_hint_y: 0.1
            RoundedButtonBack:
                text: "Back"
                size_hint: (1, 0.7)
                font_size: "40sp"
                background_color: 0, 0, 0, 0
                background_disabled_normal: ''
                on_press: root.go_back()


